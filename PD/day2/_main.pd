#N canvas 960 63 960 994 12;
#X obj 135 182 mtof;
#X obj 135 337 *~ 0.1;
#X obj 145 412 dac~ 1 2 27 28;
#X obj 137 256 *~ 2;
#X obj 137 285 -~ 1;
#X obj 139 215 phasor~ 40;
#X obj 127 53 notein;
#X floatatom 342 78 5 0 0 0 - - -, f 5;
#X floatatom 342 135 5 0 0 0 - - -, f 5;
#N canvas 735 426 450 300 mono 1;
#N canvas 456 22 799 914 mono 0;
#N canvas 0 23 450 278 (subpatch) 0;
#X array \$0-activeNotes 127 float 2 black black;
#X coords 0 100 127 -1 200 140 1;
#X restore 568 210 graph;
#X obj 262 702 f;
#X floatatom 262 744 5 0 0 0 - - -, f 5;
#X obj 176 616 select 1;
#X obj 209 261 f;
#X text 206 184 note;
#X text 266 190 velocity;
#X obj 242 261 > 0;
#X obj 203 475 tabwrite \$0-activeNotes;
#X obj 176 431 f;
#X obj 114 366 f;
#X obj 141 366 + 1;
#X msg 129 344 -1;
#X msg 217 431 -0.5;
#X obj 209 291 spigot;
#X obj 311 291 spigot;
#X obj 303 260 == 0;
#X obj 311 316 t b f;
#X obj 209 205 inlet;
#X obj 268 206 inlet;
#X obj 262 773 outlet;
#X obj 176 517 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 209 316 t b f;
#X obj 176 454 t b f;
#X obj 404 801 outlet;
#X text 113 744 most recent note active;
#X msg 356 730 0;
#X msg 386 731 1;
#X obj 129 321 loadbang;
#X obj 176 548 array max \$0-activeNotes;
#X obj 268 228 t b f f f;
#X obj 404 760 *;
#X obj 428 310 > 0;
#X obj 396 338 spigot;
#X floatatom 404 781 5 0 0 0 - - -, f 5;
#X text 453 800 velocity of most recent active note;
#X text 109 103 outlet 2 velocity of most recent active note (zero
if no notes active), f 70;
#X obj 176 591 > 0;
#X text 109 77 outlet 1 most recent note active;
#X text 110 38 pass in velocity/note pairs (velocity first) and obtain
as an output the most recent note still active and its velocity;
#X connect 1 0 2 0;
#X connect 1 0 27 0;
#X connect 2 0 20 0;
#X connect 3 0 1 0;
#X connect 3 1 26 0;
#X connect 4 0 14 0;
#X connect 4 0 15 0;
#X connect 7 0 14 1;
#X connect 9 0 23 0;
#X connect 10 0 11 0;
#X connect 11 0 10 1;
#X connect 11 0 9 1;
#X connect 12 0 10 1;
#X connect 13 0 23 0;
#X connect 14 0 22 0;
#X connect 15 0 17 0;
#X connect 16 0 15 1;
#X connect 17 0 13 0;
#X connect 17 1 8 1;
#X connect 18 0 4 0;
#X connect 19 0 30 0;
#X connect 21 0 29 0;
#X connect 22 0 9 0;
#X connect 22 1 8 1;
#X connect 23 0 21 0;
#X connect 23 1 8 0;
#X connect 26 0 31 0;
#X connect 27 0 31 0;
#X connect 28 0 12 0;
#X connect 29 0 37 0;
#X connect 29 1 1 1;
#X connect 30 0 10 0;
#X connect 30 1 7 0;
#X connect 30 2 16 0;
#X connect 30 3 32 0;
#X connect 30 3 33 0;
#X connect 31 0 34 0;
#X connect 32 0 33 1;
#X connect 33 0 31 1;
#X connect 34 0 24 0;
#X connect 37 0 3 0;
#X restore 180 87 pd mono;
#X floatatom 180 134 5 0 0 0 - - -, f 5;
#X floatatom 220 134 5 0 0 0 - - -, f 5;
#X text 29 133 most recent note active;
#X text 257 136 velocity of most recent active note;
#X text 94 68 note number in;
#X text 214 68 note velocity in;
#X connect 0 0 1 0;
#X connect 0 1 2 0;
#X restore 364 230 pd mono;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 1 0 2 1;
#X connect 1 0 2 2;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 3 0;
#X connect 6 0 0 0;
